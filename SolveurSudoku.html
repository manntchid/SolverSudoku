<!DOCTYPE html>
<html>

	<head>
		
		<title>Sudoku</title>
		<style>
			body 
			{
				background-color : Orange ;
			}
			h1
			{
				text-align : center ;
				color: red;
				background-color : orange ;
				font-size: 40px;
				width: 150px ;
				margin-left: auto ;
				margin-right : auto ;
				border-radius : 15px ;
				text-shadow: 0.1em 0.1em 0.1em #333 ;
			}
			table
			{
				background-color : white ;
				border-spacing: 0;
				border-radius : 15px ;
				padding : 20px ;
				margin-left: auto ;
				margin-right : auto ;
				
			}
			td
			{
				border-right : thin solid black ;
				border-bottom : thin solid black ;
			 
			}

			input
			{
				
				text-align: center;
				width: 3em; 
				height: 3em;
				border : 0px ;
				border-radius : 15px ;
				font-weight : bold ;
				font-size : 14px ;
				font-family : "Trebuchet MS";
			}
			.cell
			{
				border-right : 2px solid black ;
				
			}
			.cell1
			{
				border-right : 2px solid black ;
				border-bottom : none ;
			}
			.cell2
			{
				border-bottom : 2px solid black ;
			}
			.cell3
			{
				border-right : 2px solid black ;
				border-bottom : 2px solid black ;
			}
			.cell4 , .cell7
			{
				border-right : none ;
			}
			.cell5 , .cell7
			{
				border-bottom : none ;
			}
			.cell6
			{
				border-right : none ;
				border-bottom : 2px solid black ;
			}
			.button 
			{
				text-align:center; 
				 
			}
		
		
		</style>

	</head>


	<body>

		<h1>Sudoku</h1>	
		
		<table >
			
				<tr>
					<td >			  <input    maxlength="1" id="11" type="text"		/></td>
					<td >			  <input    maxlength="1" id="12" type="text"		/></td>
					<td class="cell"> <input    maxlength="1" id="13" type="text"		/></td>
					<td >			  <input    maxlength="1" id="14" type="text"		/></td>
					<td >			  <input    maxlength="1" id="15" type="text"		/></td>
					<td class="cell"> <input    maxlength="1" id="16" type="text"		/></td>
					<td >			  <input    maxlength="1" id="17" type="text"		/></td>
					<td >			  <input    maxlength="1" id="18" type="text"		/></td>
					<td class="cell4"><input    maxlength="1" id="19" type="text"		/></td>
				</tr>                                                                                              
				<tr>                                                                                               
					<td >			  <input    maxlength="1" id="21" type="text"		/></td>
					<td >			  <input    maxlength="1" id="22" type="text"		/></td>
					<td class="cell"> <input    maxlength="1" id="23" type="text"		/></td>
					<td >			  <input    maxlength="1" id="24" type="text"		/></td>
					<td >			  <input    maxlength="1" id="25" type="text"		/></td>
					<td class="cell"> <input    maxlength="1" id="26" type="text"		/></td>
					<td >			  <input    maxlength="1" id="27" type="text"		/></td>
					<td >			  <input    maxlength="1" id="28" type="text"		/></td>
					<td class="cell4"><input    maxlength="1" id="29" type="text"		/></td>
				</tr>                                                                                
				<tr>                                                                                 
					<td class="cell2"><input    maxlength="1" id="31" type="text"		/></td>
					<td class="cell2"><input    maxlength="1" id="32" type="text"		/></td>
					<td class="cell3"><input    maxlength="1" id="33" type="text"		/></td>
					<td class="cell2"><input    maxlength="1" id="34" type="text"		/></td>
					<td class="cell2"><input    maxlength="1" id="35" type="text"		/></td>
					<td class="cell3"><input    maxlength="1" id="36" type="text"		/></td>
					<td class="cell2"><input    maxlength="1" id="37" type="text"		/></td>
					<td class="cell2"><input    maxlength="1" id="38" type="text"		/></td>
					<td class="cell6"><input    maxlength="1" id="39" type="text"		/></td>
				</tr>                                                                             
				<tr>                                                                              
					<td >			  <input    maxlength="1" id="41" type="text"		/></td>
					<td >			  <input    maxlength="1" id="42" type="text"		/></td>
					<td class="cell"> <input    maxlength="1" id="43" type="text"		/></td>
					<td >			  <input    maxlength="1" id="44" type="text"		/></td>
					<td >			  <input    maxlength="1" id="45" type="text"		/></td>
					<td class="cell"> <input    maxlength="1" id="46" type="text"		/></td>
					<td >			  <input    maxlength="1" id="47" type="text"		/></td>
					<td >			  <input    maxlength="1" id="48" type="text"		/></td>
					<td class="cell4"><input    maxlength="1" id="49" type="text"		/></td>
				</tr>                                                                             
				<tr>                                                                              
					<td >			  <input    maxlength="1" id="51" type="text"    	/></td>
					<td >			  <input    maxlength="1" id="52" type="text"    	/></td>
					<td class="cell"> <input    maxlength="1" id="53" type="text"    	/></td>  
					<td >			  <input    maxlength="1" id="54" type="text"    	/></td>  
					<td >  		      <input    maxlength="1" id="55" type="text"    	/></td>
					<td class="cell"> <input    maxlength="1" id="56" type="text"    	/></td>  
					<td >			  <input    maxlength="1" id="57" type="text"    	/></td>  
					<td >			  <input    maxlength="1" id="58" type="text"    	/></td>
					<td class="cell4"><input    maxlength="1" id="59" type="text"    	/></td>
				</tr>                                                                                    	 
				<tr>                                                                                     	 
					<td class="cell2"><input    maxlength="1" id="61" type="text"     	/></td>
					<td class="cell2"><input    maxlength="1" id="62" type="text"    	/></td>  
					<td class="cell3"><input 	maxlength="1" id="63" type="text"    	/></td>  
					<td class="cell2"><input    maxlength="1" id="64" type="text"   	/></td>  
					<td class="cell2"><input    maxlength="1" id="65" type="text"    	/></td>  
					<td class="cell3"><input    maxlength="1" id="66" type="text"    	/></td>  
					<td class="cell2"><input    maxlength="1" id="67" type="text"    	/></td>
					<td class="cell2"><input    maxlength="1" id="68" type="text"    	/></td>  
					<td class="cell6"><input    maxlength="1" id="69" type="text"    	/></td>  
				</tr>                                                                                    	 
				<tr>                                                                                     	 
					<td >			  <input    maxlength="1" id="71" type="text"    	/></td>
					<td >			  <input    maxlength="1" id="72" type="text"    	/></td>  
					<td class="cell"> <input    maxlength="1" id="73" type="text"    	/></td>  
					<td >			  <input    maxlength="1" id="74" type="text"       /></td>
					<td >			  <input    maxlength="1" id="75" type="text"   	/></td>  
					<td class="cell"> <input    maxlength="1" id="76" type="text"   	/></td>  
					<td >			  <input    maxlength="1" id="77" type="text"   	/></td>
					<td >			  <input    maxlength="1" id="78" type="text"    	/></td>  
					<td class="cell4"><input    maxlength="1" id="79" type="text"    	/></td>  
				</tr>                                                                                    	 
				<tr>                                                                                     	 
					<td >			  <input    maxlength="1" id="81" type="text"    	/></td>  
					<td >			  <input    maxlength="1" id="82" type="text"    	/></td>
					<td class="cell"> <input    maxlength="1" id="83" type="text"    	/></td>
					<td >			  <input    maxlength="1" id="84" type="text"     	/></td>
					<td >			  <input    maxlength="1" id="85" type="text"   	/></td>
					<td class="cell"> <input    maxlength="1" id="86" type="text"    	/></td>
					<td >			  <input    maxlength="1" id="87" type="text"    	/></td>  
					<td >			  <input    maxlength="1" id="88" type="text"    	/></td>
					<td class="cell4"><input    maxlength="1" id="89" type="text"    	/></td>
				</tr>                                                                                    	 
				<tr>                                                                                     	 
					<td class="cell5"><input    maxlength="1" id="91" type="text"    	/></td>  
					<td class="cell5"><input    maxlength="1" id="92" type="text"    	/></td>  
					<td class="cell1"><input    maxlength="1" id="93" type="text"    	/></td>
					<td class="cell5"><input    maxlength="1" id="94" type="text"    	/></td>
					<td class="cell5"><input    maxlength="1" id="95" type="text"    	/></td>  
					<td class="cell1"><input    maxlength="1" id="96" type="text"    	/></td>
					<td class="cell5"><input    maxlength="1" id="97" type="text"    	/></td>  
					<td class="cell5"><input    maxlength="1" id="98" type="text"    	/></td>
					<td class="cell7"><input    maxlength="1" id="99" type="text"    	/></td>
				</tr>                                                                                       
			
		</table>

		<br><br>
			<div class="button">
				<button onclick="solution();">Solution</button>
			</div>
		</br></br>
		<footer>
		&copy; Copyright 2013 by Mann-tchi Dang
		</footer>

<script>
function solution(){

		var TabX_lignes = [] , TabX_colonnes = [];    
			for (var i = 1 ; i <= 9 ; i++)  
			{	
				var TabY_lignes =[] , TabY_colonnes = [];
				
				for (var j = 1 ; j <= 9 ; j++)
				{
					var cell_lignes = parseInt(document.getElementById(""+i+j).value) ; // initialisation pour chaque lignes de la grille
						
						if (isNaN(cell_lignes)){
							TabY_lignes.push(0);
						}
					    else {
					    	TabY_lignes.push (cell_lignes);
					    	}
						
						
					
					var cell_colonnes = parseInt(document.getElementById(""+j+i).value) ; // initialisation pour chaque colonnes de la grille
						
						if (isNaN(cell_colonnes)){
							
							TabY_colonnes.push(0);
						}
					    else {
					    	TabY_colonnes.push (cell_colonnes);
					    	}
						
				}
			
				TabX_lignes.push (TabY_lignes);	//ajout de tous les chiffres par lignes de la grille dans un array TabX_lignes
				TabX_colonnes.push (TabY_colonnes); //ajout de tous les chiffres par colonnes de la grille dans un array TabX_colonnes
			}
			
		/* Toutes les lignes sont stockées dans le tableau TabX_lignes et 
		   les colonnes dans le tableau TabX_colonnes, on numérote les lignes et 
		   les colonnes de 0 à 8, */

		
		var TabX1_3x3 = [] , TabX2_3x3 =[], TabX3_3x3 =[] ;    //initialisation 1ère ligne de carrées 3x3
		
			for (var i = 1 ; i <= 3 ; i++)  
			{		
				
				for (var l = 1,m = 4, n = 7 ; l <= 3, m <= 6, n <= 9 ; l++, m++, n++)
				{
					var cell1_3x3 = parseInt(document.getElementById(""+i+l).value) ; 
					
					    if (isNaN(cell1_3x3)){
					    	
					    	TabX1_3x3.push (0);
					    }
					    else {
					    	TabX1_3x3.push (cell1_3x3);
					    }
						
					
					var cell2_3x3 = parseInt(document.getElementById(""+i+m).value) ; 
					
						if (isNaN(cell2_3x3)){
					    	
					    	TabX2_3x3.push (0);
					    }
					    else {
					    	TabX2_3x3.push (cell2_3x3);
					    }
					
					var cell3_3x3 = parseInt(document.getElementById(""+i+n).value) ; 
					
						if (isNaN(cell3_3x3)){
					    	
					    	TabX3_3x3.push (0);
					    }
					    else {
					    	TabX3_3x3.push (cell3_3x3);
					    } 	
				
				}
			}
		
		
		
		var TabX4_3x3 = [] , TabX5_3x3 =[], TabX6_3x3 =[] ;    //initialisation 2ème ligne de carrées 3x3
		
			for (var j = 4 ; j <= 6 ; j++)  
			{	
				
				for (var l = 1,m = 4, n = 7 ; l <= 3, m <= 6, n <= 9 ; l++, m++, n++)
				{
					var cell4_3x3 = parseInt(document.getElementById(""+j+l).value) ; 
					
						if (isNaN(cell4_3x3)){
					    	
					    	TabX4_3x3.push (0);
					    }
					    else {
					    	TabX4_3x3.push (cell4_3x3);
					    }	
					
					var cell5_3x3 = parseInt(document.getElementById(""+j+m).value) ; 
					
						if (isNaN(cell5_3x3)){
					    	
					    	TabX5_3x3.push (0);
					    }
					    else {
					    	TabX5_3x3.push (cell5_3x3);
					    } 	
					
					var cell6_3x3 = parseInt(document.getElementById(""+j+n).value) ; 
					
						if (isNaN(cell6_3x3)){
					    	
					    	TabX6_3x3.push (0);
					    }
					    else {
					    	TabX6_3x3.push (cell6_3x3);
					    }	
				
				}
			}
			
		var TabX7_3x3 = [] , TabX8_3x3 =[], TabX9_3x3 =[] ;    //initialisation 3ème ligne de carrées 3x3
		
			for (var k = 7 ; k <= 9 ; k++)  
			{	
				
				for (var l = 1,m = 4, n = 7 ; l <= 3, m <= 6, n <= 9 ; l++, m++, n++)
				{
					var cell7_3x3 = parseInt(document.getElementById(""+k+l).value) ; 
					
						if (isNaN(cell7_3x3)){
					    	
					    	TabX7_3x3.push (0);
					    }
					    else {
					    	TabX7_3x3.push (cell7_3x3);
					    }
					    
					var cell8_3x3 = parseInt(document.getElementById(""+k+m).value) ; 
					
						if (isNaN(cell8_3x3)){
					    	
					    	TabX8_3x3.push (0);
					    }
					    else {
					    	TabX8_3x3.push (cell8_3x3);
					    }
					
					var cell9_3x3 = parseInt(document.getElementById(""+k+n).value) ; 
					
						if (isNaN(cell9_3x3)){
					    	
					    	TabX9_3x3.push (0);
					    }
					    else {
					    	TabX9_3x3.push (cell9_3x3);
					    }
				
				}
			}
		
		var Tab_3x3 =[] ;
			
			for (var o=1 ; o <= 9 ; o++ )
			{
				var X = eval("TabX"+ o +"_3x3"); // eval => évalue la valeur donc = objet array
				Tab_3x3.push(X) ;
			}
			
		/* Toutes les grilles 3x3 sont stockées dans Tab_3x3 */
	
	var compte1 = 0 ;	
	for (var g = 0 ; g < 9 ; g++){	
		for( var h = 0 ; h < 9 ; h++){
		compte1 += TabX_lignes[g][h] ;
		
		}
	}
		
	if(compte1 == 0){
		alert ("Il n'y a rien dans cette grille" ) ;
	}	
	else{
	//////////////////////////////////////// Insertion des possibilités uniques ///////////////////////////////////////////////
	
	do {
			for (var i = 0 ; i <= 8 ; i++) {	
					
				for (var j = 0 ; j <= 8 ; j++){

						if (TabX_lignes [i][j] == 0 ){
							
							var nombres_possibles1 =[] ;
								//correspondance avec le tableau Tab_3x3
								var l ;					
								if (i<=2 && j<=2) 					{l=0 ;}
								if (i<=2 && j>=3 && j<=5) 			{l=1 ;}
								if (i<=2 && j>=6 && j<=8) 			{l=2 ;}
								if (i>=3 && i<=5 && j<=2) 			{l=3 ;}
								if (i>=3 && i<=5 && j>=3 && j<=5) 	{l=4 ;}
								if (i>=3 && i<=5 && j>=6 && j<=8) 	{l=5 ;}
								if (i>=6 && i<=8 && j<=2) 			{l=6 ;}
								if (i>=6 && i<=8 && j>=3 && j<=5) 	{l=7 ;}
								if (i>=6 && i<=8 && j>=6 && j<=8) 	{l=8 ;}
							
								
							for (var k = 1 ; k <= 9 ; k++){
								// conditions des lignes, colonnes et 3x3
								if (TabX_lignes[i].indexOf(k) == -1 && 			
									TabX_colonnes[j].indexOf(k) == -1 && 
									Tab_3x3[l].indexOf(k) == -1){
								
									nombres_possibles1.push (k);
								}
							}
											
								if (nombres_possibles1.length == 1){
									var nombre = parseInt(nombres_possibles1.slice(0,1));
										TabX_lignes[i][j] = nombre;
										TabX_colonnes[j][i] = nombre;
									if ( i%3 == 0) { Tab_3x3 [l][j%3] = nombre ; } 
									if ( i%3 == 1) { Tab_3x3 [l][(j%3)+3] = nombre ; } 
									if ( i%3 == 2) { Tab_3x3 [l][(j%3)+6] = nombre ; } 
									}
													
								else if (nombres_possibles1.length != 1){
													
	//////////////////////////////////////////////////////////////////// balayage en lignes//////////////////////////////////////////////////
															
										for (var a = 0 ; a <= 8 ; a++) {	
	
											//nombres possibles dans nombres_possibles2
											for (var b = 0 ; b <= 8 ; b++){
								
												if (TabX_lignes [a][b] == 0 ){
													
													var nombres_possibles2 =[] ;
													//correspondance avec le tableau Tab_3x3	
													var l ;					
													if (a<=2 && b<=2) 					{l=0 ;}
													if (a<=2 && b>=3 && b<=5) 			{l=1 ;}
													if (a<=2 && b>=6 && b<=8) 			{l=2 ;}
													if (a>=3 && a<=5 && b<=2) 			{l=3 ;}
													if (a>=3 && a<=5 && b>=3 && b<=5) 	{l=4 ;}
													if (a>=3 && a<=5 && b>=6 && b<=8) 	{l=5 ;}
													if (a>=6 && a<=8 && b<=2) 			{l=6 ;}
													if (a>=6 && a<=8 && b>=3 && b<=5) 	{l=7 ;}
													if (a>=6 && a<=8 && b>=6 && b<=8) 	{l=8 ;}
															
														
														for (var k = 1 ; k <= 9 ; k++){
																// conditions des lignes, colonnes et 3x3
																if (TabX_lignes[a].indexOf(k) == -1 && 			
																	TabX_colonnes[b].indexOf(k) == -1 && 
																	Tab_3x3[l].indexOf(k) == -1){
																
																	 nombres_possibles2.push (k);
																	}
															}
																				
																// parcours des nombres possibles dans nombres_possibles2
																var number ;
																	
																	for (var p = 0; p < nombres_possibles2.length; p++ ){
																		
																		number = nombres_possibles2[p];
													
																		//cherche toutes les cases vides sur la lignes sauf case [a][b]
																		var count = 0 ;
																		
																			for (var m = 0 ; m <= 8 ; m++ ){
																				
																				if(m == b){
																					continue;
																				}
																				//cherche nombre possible dans Tab_3x3
																				else if (TabX_lignes[a][m]==0){
																						
																				//correspondance avec le tableau Tab_3x3				
																				var r ;		
																				if (a<=2 && m<=2) 					{r=0 ;}
																				if (a<=2 && m>=3 && m<=5) 			{r=1 ;}
																				if (a<=2 && m>=6 && m<=8) 			{r=2 ;}
																				if (a>=3 && a<=5 && m<=2) 			{r=3 ;}
																				if (a>=3 && a<=5 && m>=3 && m<=5) 	{r=4 ;}
																				if (a>=3 && a<=5 && m>=6 && m<=8) 	{r=5 ;}
																				if (a>=6 && a<=8 && m<=2) 			{r=6 ;}
																				if (a>=6 && a<=8 && m>=3 && m<=5) 	{r=7 ;}
																				if (a>=6 && a<=8 && m>=6 && m<=8) 	{r=8 ;}
																				
																				
																					if(Tab_3x3[r].indexOf(number) != -1){
																						continue ;
																					}
																					//cherche nombre sur chaque colonne sauf [a][b]
																					else if (TabX_colonnes[m].indexOf(number) == -1){
																						
																						count++ ;
																					}
																				
																				}
																			}
																					// insertion des nombres dans les tableaux
																					if (count==0){
																						TabX_lignes[a][b] = number ;
																						TabX_colonnes[b][a] = number;
																						if ( a%3 == 0) { Tab_3x3 [l][b%3] = number ; } 
																						if ( a%3 == 1) { Tab_3x3 [l][(b%3)+3] = number ; } 
																						if ( a%3 == 2) { Tab_3x3 [l][(b%3)+6] = number ; } 
																					}
																		}		
												}				
											}
										}
///////////////////////////////////////////////////////////////////////// Balayage en colonnes ////////////////////////////////////////////////////////////////
																
										for (var a = 0 ; a <= 8 ; a++) {	

											//nombres possibles dans nombres_possibles3
											for (var b = 0 ; b <= 8 ; b++){
								
												if (TabX_colonnes [a][b] == 0 ){
													
													var nombres_possibles3 =[] ;
														//correspondance avec le tableau Tab_3x3
														var l ;					
														if (a<=2 && b<=2) 					{l=0 ;}
														if (a>=3 && a<=5 && b<=2) 			{l=1 ;}
														if (a>=6 && a<=8 && b<=2) 			{l=2 ;}
														if (a<=2 && b>=3 && b<=5) 			{l=3 ;}
														if (a>=3 && a<=5 && b>=3 && b<=5) 	{l=4 ;}
														if (a>=6 && a<=8 && b>=3 && b<=5) 	{l=5 ;}
														if (a<=2 && b>=6 && b<=8) 			{l=6 ;}
														if (a>=3 && a<=5 && b>=6 && b<=8) 	{l=7 ;}
														if (a>=6 && a<=8 && b>=6 && b<=8) 	{l=8 ;}
														
															// conditions des lignes, colonnes et 3x3
															for (var k = 1 ; k <= 9 ; k++){
																	
																if (TabX_lignes[b].indexOf(k) == -1 && 			
																	TabX_colonnes[a].indexOf(k) == -1 && 
																	Tab_3x3[l].indexOf(k) == -1){
																
																	 nombres_possibles3.push (k);
																	}
																}
																			
																	// parcours des nombres possibles dans nombres_possibles3
																	var number ;
																		
																		for (var p = 0; p < nombres_possibles3.length; p++ ){
																			
																			number = nombres_possibles3[p];
													
																				//cherche toutes les cases vides sur la colonne sauf case [a][b]
																				var count = 0 ;
																				
																					for (var m = 0 ; m <= 8 ; m++ ){
																						
																						if(m == b){
																							continue;
																						}
																						
																						else if (TabX_colonnes[a][m]==0){
																								//cherche nombre possible dans 3x3
																								
																						var r ;		//correspondance avec le tableau Tab_3x3
																						if (a<=2 && m<=2) 					{r=0 ;}
																						if (a>=3 && a<=5 && m<=2) 			{r=1 ;}
																						if (a>=6 && a<=8 && m<=2) 			{r=2 ;}
																						if (a<=2 && m>=3 && m<=5) 			{r=3 ;}
																						if (a>=3 && a<=5 && m>=3 && m<=5) 	{r=4 ;}
																						if (a>=6 && a<=8 && m>=3 && m<=5) 	{r=5 ;}
																						if (a<=2 && m>=6 && m<=8) 			{r=6 ;}
																						if (a>=3 && a<=5 && m>=6 && m<=8) 	{r=7 ;}
																						if (a>=6 && a<=8 && m>=6 && m<=8) 	{r=8 ;}
																						
																							if(Tab_3x3[r].indexOf(number) != -1){
																								continue ;
																							}
																								//cherche nombre sur chaque ligne sauf [a][b]
																							else if (TabX_lignes[m].indexOf(number) == -1){
																								
																								count++ ;
																							}
																							
																						}
																					}
																							// insertion des nombres dans les tableaux
																							if (count==0){
																								TabX_colonnes[a][b] = number;
																								TabX_lignes[b][a] = number ;
																								if ( a%3 == 0) { Tab_3x3 [l][b%3] = number ; } 
																								if ( a%3 == 1) { Tab_3x3 [l][(b%3)+3] = number ; } 
																								if ( a%3 == 2) { Tab_3x3 [l][(b%3)+6] = number ; } 
																							}
																			}
												}
											}
										}
								}
						}
				}
			}
			
			// vérification
			var countfinal = 0 ;
			
				for (var c=0 ; c<9; c++){
					
					for (var d=0 ; d<9;d++){
						
						if(TabX_lignes[c][d] == 0){
							
							countfinal++ ;
						}	
					}
					
				}
			
				
	}
	while (countfinal != 0)	
			
			
	
		//inscription des nombres sur html
		
		for (var i = 1 ; i <= 9 ; i++){	
					
					for (var j = 1 ; j <= 9 ; j++){
						if (document.getElementById(""+i+j).value == ""){
							document.getElementById(""+i+j).value = TabX_lignes[i-1][j-1] ;
							document.getElementById(""+i+j).style.color = "Red" ;
						}
						
						
		
					}
				
	}
  }
  
  
}
			   
		
</script>

	</body>
</html>
